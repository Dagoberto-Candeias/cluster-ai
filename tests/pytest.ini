[tool:pytest]
# Configurações do pytest para o Cluster AI

# Diretórios de teste
testpaths = tests
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Configurações de execução
addopts =
    --verbose
    --tb=short
    --strict-markers
    --disable-warnings
    --cov=.
    --cov-report=html:tests/reports/coverage
    --cov-report=xml:tests/reports/coverage.xml
    --cov-report=term-missing
    --cov-fail-under=80
    --html=tests/reports/report.html
    --self-contained-html

# Marcadores
markers =
    unit: Testes unitários
    integration: Testes de integração
    e2e: Testes end-to-end
    performance: Testes de performance
    security: Testes de segurança
    slow: Testes que demoram mais
    skip_ci: Pular em CI/CD
    requires_docker: Requer Docker
    requires_gpu: Requer GPU
    smoke: Testes de fumaça para saúde básica da aplicação
    monitoring: Testes relacionados ao monitoramento do sistema
    alerts: Testes relacionados ao sistema de alertas
    recovery: Testes relacionados à recuperação de falhas
    timeout: Testes com configuração de timeout específica
    bash: Testes relacionados a scripts bash
    installation: Testes de instalação
    deployment: Testes de deployment
    model: Testes relacionados a modelos
    api: Testes de API
    ui: Testes de interface de usuário
    database: Testes de banco de dados
    network: Testes de rede
    file: Testes de operações de arquivo
    config: Testes de configuração
    auth: Testes de autenticação
    session: Testes de sessão
    access: Testes de controle de acesso
    input_validation: Testes de validação de entrada
    command_injection: Testes de proteção contra injeção de comandos
    data_validation: Testes de validação de dados
    cluster: Testes relacionados ao cluster
    dask: Testes relacionados ao Dask
    rstudio: Testes relacionados ao RStudio
    demo: Testes de demonstração
    benchmark: Testes de benchmark
    caching: Testes de cache
    memory: Testes de memória
    io: Testes de I/O
    concurrent: Testes de operações concorrentes
    scalability: Testes de escalabilidade
    fault_tolerance: Testes de tolerância a falhas
    data_transfer: Testes de transferência de dados
    disk: Testes de disco
    webui: Testes de interface web
    auto_discover: Testes de descoberta automática
    cache_performance: Testes de performance de cache

# Configurações de filtro
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning

# Configurações de paralelização
# numprocesses = auto  # Desabilitado por padrão, habilitar com -n auto

# Configurações de output
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Configurações de cache
cache_dir = .pytest_cache

# Configurações de fixtures
# usefixtures =
#     setup_test_environment
