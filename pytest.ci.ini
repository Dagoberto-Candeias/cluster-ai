[pytest]
# Configuração do Pytest para ambientes de Integração Contínua (CI).
# Este arquivo é mais estrito que o pytest.ini padrão.

# Opções de linha de comando padrão.
# --tb=native: traceback completo para análise de falhas no CI.
# --strict-markers: falha se um marcador não registrado for usado.
# xfail_strict=true: trata testes marcados com XPASS (passagem inesperada) como falhas.
addopts = -v --tb=native --strict-markers --cov=. --cov-append --junitxml=tests/reports/junit-report.xml
xfail_strict = true

# Diretórios que o pytest deve procurar por testes.
testpaths =
    tests

# Diretórios a serem ignorados durante a coleta de testes.
norecursedirs = .git .* build dist venv* tests/legacy

# Registrar marcadores customizados para evitar avisos (warnings).
markers =
    unit: Testes unitários
    integration: Testes de integração
    e2e: Testes end-to-end
    performance: Testes de performance
    security: Testes de segurança
    slow: Testes que demoram mais
    skip_ci: Testes para pular em ambientes de CI

# Ignorar avisos específicos.
filterwarnings =
    ignore::DeprecationWarning