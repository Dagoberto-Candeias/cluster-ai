#!/usr/bin/env python3
"""
Python startup file for interactive sessions.

This file is executed when the Python interpreter is started in interactive mode.
It sets up a command history and tab completion.
"""

import os
import sys

def setup_interactive_shell():
    """Configures history and auto-completion for the interactive shell."""
    # Configure sys.ps1 and sys.ps2 for interactive prompt
    sys.ps1 = ">>> "
    sys.ps2 = "... "

    # Optional: Print a simple welcome message
    if not os.environ.get('PYTHONSTARTUP_QUIET'):
        print(f"Python {sys.version.split()[0]} - Interactive Session (type 'exit()' or Ctrl-D to quit)")

    try:
        import readline
        import atexit
    except ImportError:
        # readline is not available, so no history or completion
        return

    # Setup command history
    history_file = os.path.join(os.path.expanduser("~"), ".python_history")
    try:
        readline.read_history_file(history_file)
    except FileNotFoundError:
        pass

    atexit.register(readline.write_history_file, history_file)

    # Enable tab completion
    readline.parse_and_bind("tab: complete")

if __name__ == "__main__":
    setup_interactive_shell()
    # Cleanup to avoid polluting the global namespace
    del os, sys, setup_interactive_shell
